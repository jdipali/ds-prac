import numpy as np
import skfuzzy as fuzz
from skfuzzy import control as ctrl
import matplotlib.pyplot as plt
service = ctrl.Antecedent(np.arange(0, 11, 1), 'service')
quality = ctrl.Antecedent(np.arange(0, 11, 1), 'quality')
tip = ctrl.Consequent(np.arange(0, 26, 1), 'tip')
quality.automf(3)
service.automf(3)
# For the Tip, we define custom triangular membership functions (trimf)
tip['low'] = fuzz.trimf(tip.universe, [0, 0, 13])
tip['medium'] = fuzz.trimf(tip.universe, [0, 13, 25])
tip['high'] = fuzz.trimf(tip.universe, [13, 25, 25])
# --- 3. Define the Fuzzy Rules ---
# Rules use standard fuzzy operators: OR (|) and AND (&)
# Rule 1: IF service is poor OR quality is poor, THEN tip is low
rule1 = ctrl.Rule(service['poor'] | quality['poor'], tip['low'])
# Rule 2: IF service is average, THEN tip is medium
rule2 = ctrl.Rule(service['average'], tip['medium'])
# Rule 3: IF service is good OR quality is good, THEN tip is high
rule3 = ctrl.Rule(service['good'] | quality['good'], tip['high'])

# --- 4. Create the Control System and Simulation ---
tipping_ctrl = ctrl.ControlSystem([rule1, rule2, rule3])
tipping_simulation = ctrl.ControlSystemSimulation(tipping_ctrl)
# --- 5. Pass Input Values and Compute the Result ---
# Example: The food quality was 6.5, and the service was 9.8.
tipping_simulation.input['quality'] = 6.5
tipping_simulation.input['service'] = 9.8
# Crunch the numbers
tipping_simulation.compute()
recommended_tip = tipping_simulation.output['tip']
print(f"Food Quality: 6.5 / 10")
print(f"Service Rating: 9.8 / 10")
print("-" * 25)
print(f"Recommended Tip: {recommended_tip:.2f}%")